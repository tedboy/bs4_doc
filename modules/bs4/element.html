

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>bs4.element &mdash; PROJECT_NAME 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PROJECT_NAME 1 documentation" href="../../index.html"/>
        <link rel="up" title="bs4" href="../bs4.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> PROJECT_NAME
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../1_quick_start.html">1. Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../2_installation.html">2. Installing Beautiful Soup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../3_making_the_soup.html">3. Making the soup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../4_kind_of_objects.html">4. Kinds of objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../5_navigating_the_tree.html">5. Navigating the tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../6_searching_the_tree.html">6. Searching the tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../7_modifying_the_tree.html">7. Modifying the tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../8_output.html">8. Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../9_specifying_the_parser.html">9. Specifying the parser to use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../10_encodings.html">10. Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../11_parsing_parts_of_doc.html">11. Parsing only part of a document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../12_troubleshooting.html">12. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/bs4.html">13. bs4</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PROJECT_NAME</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../bs4.html">bs4</a> &raquo;</li>
        
      <li>bs4.element</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for bs4.element</h1><div class="highlight"><pre>
<span></span><span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>

<span class="kn">from</span> <span class="nn">pdb</span> <span class="k">import</span> <span class="n">set_trace</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">bs4.dammit</span> <span class="k">import</span> <span class="n">EntitySubstitution</span>

<span class="n">DEFAULT_OUTPUT_ENCODING</span> <span class="o">=</span> <span class="s2">&quot;utf-8&quot;</span>
<span class="n">PY3K</span> <span class="o">=</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">whitespace_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;\s+&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_alias</span><span class="p">(</span><span class="n">attr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Alias one attribute name to another for backward compatibility&quot;&quot;&quot;</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

    <span class="nd">@alias</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">alias</span>


<span class="k">class</span> <span class="nc">NamespacedAttribute</span><span class="p">(</span><span class="n">unicode</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Not really namespaced.</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span>
        <span class="k">return</span> <span class="n">obj</span>

<span class="k">class</span> <span class="nc">AttributeValueWithCharsetSubstitution</span><span class="p">(</span><span class="n">unicode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A stand-in object for a character encoding specified in HTML.&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">CharsetMetaAttributeValue</span><span class="p">(</span><span class="n">AttributeValueWithCharsetSubstitution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A generic stand-in for the value of a meta tag&#39;s &#39;charset&#39; attribute.</span>

<span class="sd">    When Beautiful Soup parses the markup &#39;&lt;meta charset=&quot;utf8&quot;&gt;&#39;, the</span>
<span class="sd">    value of the &#39;charset&#39; attribute will be one of these objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">original_value</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">original_value</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">original_value</span> <span class="o">=</span> <span class="n">original_value</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">encoding</span>


<span class="k">class</span> <span class="nc">ContentMetaAttributeValue</span><span class="p">(</span><span class="n">AttributeValueWithCharsetSubstitution</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A generic stand-in for the value of a meta tag&#39;s &#39;content&#39; attribute.</span>

<span class="sd">    When Beautiful Soup parses the markup:</span>
<span class="sd">     &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf8&quot;&gt;</span>

<span class="sd">    The value of the &#39;content&#39; attribute will be one of these objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CHARSET_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;((^|;)\s*charset=)([^;]*)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">original_value</span><span class="p">):</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">CHARSET_RE</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">original_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># No substitution necessary.</span>
            <span class="k">return</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">unicode</span><span class="p">,</span> <span class="n">original_value</span><span class="p">)</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">original_value</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">original_value</span> <span class="o">=</span> <span class="n">original_value</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">rewrite</span><span class="p">(</span><span class="n">match</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">encoding</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">CHARSET_RE</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">rewrite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_value</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">HTMLAwareEntitySubstitution</span><span class="p">(</span><span class="n">EntitySubstitution</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Entity substitution rules that are aware of some HTML quirks.</span>

<span class="sd">    Specifically, the contents of &lt;script&gt; and &lt;style&gt; tags should not</span>
<span class="sd">    undergo entity substitution.</span>

<span class="sd">    Incoming NavigableString objects are checked to see if they&#39;re the</span>
<span class="sd">    direct children of a &lt;script&gt; or &lt;style&gt; tag.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cdata_containing_tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="s2">&quot;style&quot;</span><span class="p">])</span>

    <span class="n">preformatted_tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s2">&quot;pre&quot;</span><span class="p">])</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_substitute_if_appropriate</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">ns</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ns</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">ns</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">ns</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">cdata_containing_tags</span><span class="p">):</span>
            <span class="c1"># Do nothing.</span>
            <span class="k">return</span> <span class="n">ns</span>
        <span class="c1"># Substitute.</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">substitute_html</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">ns</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">_substitute_if_appropriate</span><span class="p">(</span>
            <span class="n">ns</span><span class="p">,</span> <span class="n">EntitySubstitution</span><span class="o">.</span><span class="n">substitute_html</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">substitute_xml</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">ns</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">_substitute_if_appropriate</span><span class="p">(</span>
            <span class="n">ns</span><span class="p">,</span> <span class="n">EntitySubstitution</span><span class="o">.</span><span class="n">substitute_xml</span><span class="p">)</span>

<div class="viewcode-block" id="PageElement"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.html#bs4.PageElement">[docs]</a><span class="k">class</span> <span class="nc">PageElement</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Contains the navigational information for some part of the page</span>
<span class="sd">    (either a tag or a piece of text)&quot;&quot;&quot;</span>

    <span class="c1"># There are five possible values for the &quot;formatter&quot; argument passed in</span>
    <span class="c1"># to methods like encode() and prettify():</span>
    <span class="c1">#</span>
    <span class="c1"># &quot;html&quot; - All Unicode characters with corresponding HTML entities</span>
    <span class="c1">#   are converted to those entities on output.</span>
    <span class="c1"># &quot;minimal&quot; - Bare ampersands and angle brackets are converted to</span>
    <span class="c1">#   XML entities: &amp;amp; &amp;lt; &amp;gt;</span>
    <span class="c1"># None - The null formatter. Unicode characters are never</span>
    <span class="c1">#   converted to entities.  This is not recommended, but it&#39;s</span>
    <span class="c1">#   faster than &quot;minimal&quot;.</span>
    <span class="c1"># A function - This function will be called on every string that</span>
    <span class="c1">#  needs to undergo entity substitution.</span>
    <span class="c1">#</span>

    <span class="c1"># In an HTML document, the default &quot;html&quot; and &quot;minimal&quot; functions</span>
    <span class="c1"># will leave the contents of &lt;script&gt; and &lt;style&gt; tags alone. For</span>
    <span class="c1"># an XML document, all tags will be given the same treatment.</span>

    <span class="n">HTML_FORMATTERS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;html&quot;</span> <span class="p">:</span> <span class="n">HTMLAwareEntitySubstitution</span><span class="o">.</span><span class="n">substitute_html</span><span class="p">,</span>
        <span class="s2">&quot;minimal&quot;</span> <span class="p">:</span> <span class="n">HTMLAwareEntitySubstitution</span><span class="o">.</span><span class="n">substitute_xml</span><span class="p">,</span>
        <span class="kc">None</span> <span class="p">:</span> <span class="kc">None</span>
        <span class="p">}</span>

    <span class="n">XML_FORMATTERS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;html&quot;</span> <span class="p">:</span> <span class="n">EntitySubstitution</span><span class="o">.</span><span class="n">substitute_html</span><span class="p">,</span>
        <span class="s2">&quot;minimal&quot;</span> <span class="p">:</span> <span class="n">EntitySubstitution</span><span class="o">.</span><span class="n">substitute_xml</span><span class="p">,</span>
        <span class="kc">None</span> <span class="p">:</span> <span class="kc">None</span>
        <span class="p">}</span>

<div class="viewcode-block" id="PageElement.format_string"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.format_string.html#bs4.PageElement.format_string">[docs]</a>    <span class="k">def</span> <span class="nf">format_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="s1">&#39;minimal&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Format the given string using the given formatter.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">formatter</span><span class="p">):</span>
            <span class="n">formatter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_for_name</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">formatter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">s</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">formatter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_is_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Is this element part of an XML tree or an HTML tree?</span>

<span class="sd">        This is used when mapping a formatter name (&quot;minimal&quot;) to an</span>
<span class="sd">        appropriate function (one that performs entity-substitution on</span>
<span class="sd">        the contents of &lt;script&gt; and &lt;style&gt; tags, or not). It&#39;s</span>
<span class="sd">        inefficient, but it should be called very rarely.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># This is the top-level object. It should have .is_xml set</span>
            <span class="c1"># from tree creation. If not, take a guess--BS is usually</span>
            <span class="c1"># used on HTML markup.</span>
            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;is_xml&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_is_xml</span>

    <span class="k">def</span> <span class="nf">_formatter_for_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="s2">&quot;Look up a formatter function based on its name and the tree.&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_xml</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">XML_FORMATTERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">EntitySubstitution</span><span class="o">.</span><span class="n">substitute_xml</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">HTML_FORMATTERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">HTMLAwareEntitySubstitution</span><span class="o">.</span><span class="n">substitute_xml</span><span class="p">)</span>

<div class="viewcode-block" id="PageElement.setup"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.setup.html#bs4.PageElement.setup">[docs]</a>    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">previous_element</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">next_element</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="n">previous_sibling</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">next_sibling</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets up the initial relations between this element and</span>
<span class="sd">        other elements.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">previous_element</span>
        <span class="k">if</span> <span class="n">previous_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">next_element</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_element</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">next_element</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">next_sibling</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">previous_sibling</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">):</span>
            <span class="n">previous_sibling</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">previous_sibling</span>
        <span class="k">if</span> <span class="n">previous_sibling</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="bp">self</span></div>

    <span class="n">nextSibling</span> <span class="o">=</span> <span class="n">_alias</span><span class="p">(</span><span class="s2">&quot;next_sibling&quot;</span><span class="p">)</span>  <span class="c1"># BS3</span>
    <span class="n">previousSibling</span> <span class="o">=</span> <span class="n">_alias</span><span class="p">(</span><span class="s2">&quot;previous_sibling&quot;</span><span class="p">)</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.replace_with"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.replace_with.html#bs4.PageElement.replace_with">[docs]</a>    <span class="k">def</span> <span class="nf">replace_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replace_with</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot replace one element with another when the&quot;</span>
                <span class="s2">&quot;element to be replaced is not part of a tree.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">replace_with</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">replace_with</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot replace a Tag with its parent.&quot;</span><span class="p">)</span>
        <span class="n">old_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="n">my_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="n">old_parent</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">my_index</span><span class="p">,</span> <span class="n">replace_with</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>
    <span class="n">replaceWith</span> <span class="o">=</span> <span class="n">replace_with</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.unwrap"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.unwrap.html#bs4.PageElement.unwrap">[docs]</a>    <span class="k">def</span> <span class="nf">unwrap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">my_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot replace an element with its contents when that&quot;</span>
                <span class="s2">&quot;element is not part of a tree.&quot;</span><span class="p">)</span>
        <span class="n">my_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[:]):</span>
            <span class="n">my_parent</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">my_index</span><span class="p">,</span> <span class="n">child</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>
    <span class="n">replace_with_children</span> <span class="o">=</span> <span class="n">unwrap</span>
    <span class="n">replaceWithChildren</span> <span class="o">=</span> <span class="n">unwrap</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.wrap"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.wrap.html#bs4.PageElement.wrap">[docs]</a>    <span class="k">def</span> <span class="nf">wrap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wrap_inside</span><span class="p">):</span>
        <span class="n">me</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replace_with</span><span class="p">(</span><span class="n">wrap_inside</span><span class="p">)</span>
        <span class="n">wrap_inside</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">me</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wrap_inside</span></div>

<div class="viewcode-block" id="PageElement.extract"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.extract.html#bs4.PageElement.extract">[docs]</a>    <span class="k">def</span> <span class="nf">extract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Destructively rips this element out of the tree.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)]</span>

        <span class="c1">#Find the two elements that would be next to each other if</span>
        <span class="c1">#this element (and any children) hadn&#39;t been parsed. Connect</span>
        <span class="c1">#the two.</span>
        <span class="n">last_child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_descendant</span><span class="p">()</span>
        <span class="n">next_element</span> <span class="o">=</span> <span class="n">last_child</span><span class="o">.</span><span class="n">next_element</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">next_element</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">next_element</span>
        <span class="k">if</span> <span class="n">next_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">next_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span><span class="p">:</span>
            <span class="n">next_element</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">last_child</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="k">def</span> <span class="nf">_last_descendant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_initialized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">accept_self</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="s2">&quot;Finds the last element beneath this object to be parsed.&quot;</span>
        <span class="k">if</span> <span class="n">is_initialized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">:</span>
            <span class="n">last_child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">previous_element</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">last_child</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">while</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">last_child</span><span class="p">,</span> <span class="n">Tag</span><span class="p">)</span> <span class="ow">and</span> <span class="n">last_child</span><span class="o">.</span><span class="n">contents</span><span class="p">:</span>
                <span class="n">last_child</span> <span class="o">=</span> <span class="n">last_child</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">accept_self</span> <span class="ow">and</span> <span class="n">last_child</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">last_child</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">last_child</span>
    <span class="c1"># BS3: Not part of the API!</span>
    <span class="n">_lastRecursiveChild</span> <span class="o">=</span> <span class="n">_last_descendant</span>

<div class="viewcode-block" id="PageElement.insert"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.insert.html#bs4.PageElement.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">new_child</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">new_child</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot insert None into a tag.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_child</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot insert a tag into itself.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">new_child</span><span class="p">,</span> <span class="n">basestring</span><span class="p">)</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_child</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">)):</span>
            <span class="n">new_child</span> <span class="o">=</span> <span class="n">NavigableString</span><span class="p">(</span><span class="n">new_child</span><span class="p">)</span>

        <span class="n">position</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">new_child</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">new_child</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># We&#39;re &#39;inserting&#39; an element that&#39;s already one</span>
            <span class="c1"># of this object&#39;s children.</span>
            <span class="k">if</span> <span class="n">new_child</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">current_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">new_child</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">current_index</span> <span class="o">&lt;</span> <span class="n">position</span><span class="p">:</span>
                    <span class="c1"># We&#39;re moving this element further down the list</span>
                    <span class="c1"># of this object&#39;s children. That means that when</span>
                    <span class="c1"># we extract this element, our target index will</span>
                    <span class="c1"># jump down one.</span>
                    <span class="n">position</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>

        <span class="n">new_child</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">previous_child</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">position</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">previous_child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">position</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">previous_child</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">previous_sibling</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">new_child</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">previous_child</span><span class="o">.</span><span class="n">_last_descendant</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_child</span><span class="o">.</span><span class="n">previous_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">previous_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">new_child</span>

        <span class="n">new_childs_last_element</span> <span class="o">=</span> <span class="n">new_child</span><span class="o">.</span><span class="n">_last_descendant</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">position</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">):</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="n">parents_next_sibling</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">while</span> <span class="n">parents_next_sibling</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parents_next_sibling</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">next_sibling</span>
                <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">parent</span>
                <span class="k">if</span> <span class="n">parents_next_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># We found the element that comes next in the document.</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">parents_next_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">new_childs_last_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">parents_next_sibling</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># The last element of this tag is the last element in</span>
                <span class="c1"># the document.</span>
                <span class="n">new_childs_last_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">next_child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">position</span><span class="p">]</span>
            <span class="n">new_child</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">next_child</span>
            <span class="k">if</span> <span class="n">new_child</span><span class="o">.</span><span class="n">next_sibling</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">new_child</span><span class="o">.</span><span class="n">next_sibling</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">new_child</span>
            <span class="n">new_childs_last_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">next_child</span>

        <span class="k">if</span> <span class="n">new_childs_last_element</span><span class="o">.</span><span class="n">next_element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_childs_last_element</span><span class="o">.</span><span class="n">next_element</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">new_childs_last_element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">new_child</span><span class="p">)</span></div>

<div class="viewcode-block" id="PageElement.append"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.append.html#bs4.PageElement.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Appends the given tag to the contents of this tag.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">),</span> <span class="n">tag</span><span class="p">)</span></div>

<div class="viewcode-block" id="PageElement.insert_before"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.insert_before.html#bs4.PageElement.insert_before">[docs]</a>    <span class="k">def</span> <span class="nf">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predecessor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the given element the immediate predecessor of this one.</span>

<span class="sd">        The two elements will have the same parent, and the given element</span>
<span class="sd">        will be immediately before this one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">is</span> <span class="n">predecessor</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t insert an element before itself.&quot;</span><span class="p">)</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Element has no parent, so &#39;before&#39; has no meaning.&quot;</span><span class="p">)</span>
        <span class="c1"># Extract first so that the index won&#39;t be screwed up if they</span>
        <span class="c1"># are siblings.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">predecessor</span><span class="p">,</span> <span class="n">PageElement</span><span class="p">):</span>
            <span class="n">predecessor</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">predecessor</span><span class="p">)</span></div>

<div class="viewcode-block" id="PageElement.insert_after"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.insert_after.html#bs4.PageElement.insert_after">[docs]</a>    <span class="k">def</span> <span class="nf">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">successor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Makes the given element the immediate successor of this one.</span>

<span class="sd">        The two elements will have the same parent, and the given element</span>
<span class="sd">        will be immediately after this one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">is</span> <span class="n">successor</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t insert an element after itself.&quot;</span><span class="p">)</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Element has no parent, so &#39;after&#39; has no meaning.&quot;</span><span class="p">)</span>
        <span class="c1"># Extract first so that the index won&#39;t be screwed up if they</span>
        <span class="c1"># are siblings.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">successor</span><span class="p">,</span> <span class="n">PageElement</span><span class="p">):</span>
            <span class="n">successor</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">successor</span><span class="p">)</span></div>

<div class="viewcode-block" id="PageElement.find_next"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_next.html#bs4.PageElement.find_next">[docs]</a>    <span class="k">def</span> <span class="nf">find_next</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the first item that matches the given criteria and</span>
<span class="sd">        appears after this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_one</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find_all_next</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findNext</span> <span class="o">=</span> <span class="n">find_next</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.find_all_next"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_all_next.html#bs4.PageElement.find_all_next">[docs]</a>    <span class="k">def</span> <span class="nf">find_all_next</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all items that match the given criteria and appear</span>
<span class="sd">        after this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_elements</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findAllNext</span> <span class="o">=</span> <span class="n">find_all_next</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.find_next_sibling"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_next_sibling.html#bs4.PageElement.find_next_sibling">[docs]</a>    <span class="k">def</span> <span class="nf">find_next_sibling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the closest sibling to this Tag that matches the</span>
<span class="sd">        given criteria and appears after this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_one</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find_next_siblings</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findNextSibling</span> <span class="o">=</span> <span class="n">find_next_sibling</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.find_next_siblings"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_next_siblings.html#bs4.PageElement.find_next_siblings">[docs]</a>    <span class="k">def</span> <span class="nf">find_next_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the siblings of this Tag that match the given</span>
<span class="sd">        criteria and appear after this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">next_siblings</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findNextSiblings</span> <span class="o">=</span> <span class="n">find_next_siblings</span>   <span class="c1"># BS3</span>
    <span class="n">fetchNextSiblings</span> <span class="o">=</span> <span class="n">find_next_siblings</span>  <span class="c1"># BS2</span>

<div class="viewcode-block" id="PageElement.find_previous"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_previous.html#bs4.PageElement.find_previous">[docs]</a>    <span class="k">def</span> <span class="nf">find_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the first item that matches the given criteria and</span>
<span class="sd">        appears before this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_one</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">find_all_previous</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findPrevious</span> <span class="o">=</span> <span class="n">find_previous</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.find_all_previous"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_all_previous.html#bs4.PageElement.find_all_previous">[docs]</a>    <span class="k">def</span> <span class="nf">find_all_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all items that match the given criteria and appear</span>
<span class="sd">        before this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_elements</span><span class="p">,</span>
                           <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findAllPrevious</span> <span class="o">=</span> <span class="n">find_all_previous</span>  <span class="c1"># BS3</span>
    <span class="n">fetchPrevious</span> <span class="o">=</span> <span class="n">find_all_previous</span>    <span class="c1"># BS2</span>

<div class="viewcode-block" id="PageElement.find_previous_sibling"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_previous_sibling.html#bs4.PageElement.find_previous_sibling">[docs]</a>    <span class="k">def</span> <span class="nf">find_previous_sibling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the closest sibling to this Tag that matches the</span>
<span class="sd">        given criteria and appears before this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_one</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">find_previous_siblings</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findPreviousSibling</span> <span class="o">=</span> <span class="n">find_previous_sibling</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.find_previous_siblings"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_previous_siblings.html#bs4.PageElement.find_previous_siblings">[docs]</a>    <span class="k">def</span> <span class="nf">find_previous_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the siblings of this Tag that match the given</span>
<span class="sd">        criteria and appear before this Tag in the document.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">previous_siblings</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findPreviousSiblings</span> <span class="o">=</span> <span class="n">find_previous_siblings</span>   <span class="c1"># BS3</span>
    <span class="n">fetchPreviousSiblings</span> <span class="o">=</span> <span class="n">find_previous_siblings</span>  <span class="c1"># BS2</span>

<div class="viewcode-block" id="PageElement.find_parent"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_parent.html#bs4.PageElement.find_parent">[docs]</a>    <span class="k">def</span> <span class="nf">find_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the closest parent of this Tag that matches the given</span>
<span class="sd">        criteria.&quot;&quot;&quot;</span>
        <span class="c1"># NOTE: We can&#39;t use _find_one because findParents takes a different</span>
        <span class="c1"># set of arguments.</span>
        <span class="n">r</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_parents</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">l</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">r</span></div>
    <span class="n">findParent</span> <span class="o">=</span> <span class="n">find_parent</span>  <span class="c1"># BS3</span>

<div class="viewcode-block" id="PageElement.find_parents"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.find_parents.html#bs4.PageElement.find_parents">[docs]</a>    <span class="k">def</span> <span class="nf">find_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the parents of this Tag that match the given</span>
<span class="sd">        criteria.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parents</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findParents</span> <span class="o">=</span> <span class="n">find_parents</span>   <span class="c1"># BS3</span>
    <span class="n">fetchParents</span> <span class="o">=</span> <span class="n">find_parents</span>  <span class="c1"># BS2</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_element</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previous</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span>

    <span class="c1">#These methods do the real heavy lifting.</span>

    <span class="k">def</span> <span class="nf">_find_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">l</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">_find_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">generator</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="s2">&quot;Iterates over a generator looking for things that match.&quot;</span>

        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;string&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">SoupStrainer</span><span class="p">):</span>
            <span class="n">strainer</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">strainer</span> <span class="o">=</span> <span class="n">SoupStrainer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">limit</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">attrs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Optimization to find all tags.</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">generator</span>
                          <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">Tag</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">ResultSet</span><span class="p">(</span><span class="n">strainer</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
                <span class="c1"># Optimization to find all tags with a given name.</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">generator</span>
                          <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">Tag</span><span class="p">)</span>
                            <span class="ow">and</span> <span class="n">element</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">ResultSet</span><span class="p">(</span><span class="n">strainer</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">ResultSet</span><span class="p">(</span><span class="n">strainer</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">generator</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">i</span><span class="p">:</span>
                <span class="n">found</span> <span class="o">=</span> <span class="n">strainer</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
                    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">found</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                        <span class="k">break</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="c1">#These generators can be used to navigate starting from both</span>
    <span class="c1">#NavigableStrings and Tags.</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">next_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_element</span>
        <span class="k">while</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">next_element</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">next_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span>
        <span class="k">while</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">next_sibling</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previous_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_element</span>
        <span class="k">while</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">previous_element</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">previous_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_sibling</span>
        <span class="k">while</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">previous_sibling</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">while</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">parent</span>

    <span class="c1"># Methods for supporting CSS selectors.</span>

    <span class="n">tag_name_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;^[a-zA-Z0-9][-.a-zA-Z0-9:_]*$&#39;</span><span class="p">)</span>

    <span class="c1"># /^([a-zA-Z0-9][-.a-zA-Z0-9:_]*)\[(\w+)([=~\|\^\$\*]?)=?&quot;?([^\]&quot;]*)&quot;?\]$/</span>
    <span class="c1">#   \---------------------------/  \---/\-------------/    \-------/</span>
    <span class="c1">#     |                              |         |               |</span>
    <span class="c1">#     |                              |         |           The value</span>
    <span class="c1">#     |                              |    ~,|,^,$,* or =</span>
    <span class="c1">#     |                           Attribute</span>
    <span class="c1">#    Tag</span>
    <span class="n">attribselect_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
        <span class="s1">r&#39;^(?P&lt;tag&gt;[a-zA-Z0-9][-.a-zA-Z0-9:_]*)?\[(?P&lt;attribute&gt;[\w-]+)(?P&lt;operator&gt;[=~\|\^\$\*]?)&#39;</span> <span class="o">+</span>
        <span class="s1">r&#39;=?&quot;?(?P&lt;value&gt;[^\]&quot;]*)&quot;?\]$&#39;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_attr_value_as_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Force an attribute value into a string representation.</span>

<span class="sd">        A multi-valued attribute will be converted into a</span>
<span class="sd">        space-separated stirng.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_tag_name_matches_and</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tag_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">function</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">_match</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">tag_name</span> <span class="ow">and</span> <span class="n">function</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_match</span>

    <span class="k">def</span> <span class="nf">_attribute_checker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a function that performs a CSS selector operation.</span>

<span class="sd">        Takes an operator, attribute and optional value. Returns a</span>
<span class="sd">        function that will return True for elements that match that</span>
<span class="sd">        combination.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
            <span class="c1"># string representation of `attribute` is equal to `value`</span>
            <span class="k">return</span> <span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">el</span><span class="o">.</span><span class="n">_attr_value_as_string</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span> <span class="o">==</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;~&#39;</span><span class="p">:</span>
            <span class="c1"># space-separated list representation of `attribute`</span>
            <span class="c1"># contains `value`</span>
            <span class="k">def</span> <span class="nf">_includes_value</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
                <span class="n">attribute_value</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">attribute_value</span> <span class="o">=</span> <span class="n">attribute_value</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attribute_value</span>
            <span class="k">return</span> <span class="n">_includes_value</span>
        <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;^&#39;</span><span class="p">:</span>
            <span class="c1"># string representation of `attribute` starts with `value`</span>
            <span class="k">return</span> <span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">el</span><span class="o">.</span><span class="n">_attr_value_as_string</span><span class="p">(</span>
                <span class="n">attribute</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;$&#39;</span><span class="p">:</span>
            <span class="c1"># string represenation of `attribute` ends with `value`</span>
            <span class="k">return</span> <span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">el</span><span class="o">.</span><span class="n">_attr_value_as_string</span><span class="p">(</span>
                <span class="n">attribute</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
            <span class="c1"># string representation of `attribute` contains `value`</span>
            <span class="k">return</span> <span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">_attr_value_as_string</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;|&#39;</span><span class="p">:</span>
            <span class="c1"># string representation of `attribute` is either exactly</span>
            <span class="c1"># `value` or starts with `value` and then a dash.</span>
            <span class="k">def</span> <span class="nf">_is_or_starts_with_dash</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
                <span class="n">attribute_value</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">_attr_value_as_string</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">attribute_value</span> <span class="o">==</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">attribute_value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
                        <span class="n">value</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">_is_or_starts_with_dash</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">el</span><span class="o">.</span><span class="n">has_attr</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span>

    <span class="c1"># Old non-property versions of the generators, for backwards</span>
    <span class="c1"># compatibility with BS3.</span>
<div class="viewcode-block" id="PageElement.nextGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.nextGenerator.html#bs4.PageElement.nextGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">nextGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_elements</span></div>

<div class="viewcode-block" id="PageElement.nextSiblingGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.nextSiblingGenerator.html#bs4.PageElement.nextSiblingGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">nextSiblingGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_siblings</span></div>

<div class="viewcode-block" id="PageElement.previousGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.previousGenerator.html#bs4.PageElement.previousGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">previousGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_elements</span></div>

<div class="viewcode-block" id="PageElement.previousSiblingGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.previousSiblingGenerator.html#bs4.PageElement.previousSiblingGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">previousSiblingGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_siblings</span></div>

<div class="viewcode-block" id="PageElement.parentGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.PageElement.parentGenerator.html#bs4.PageElement.parentGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">parentGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parents</span></div></div>


<div class="viewcode-block" id="NavigableString"><a class="viewcode-back" href="../../generated/generated/bs4.NavigableString.html#bs4.NavigableString">[docs]</a><span class="k">class</span> <span class="nc">NavigableString</span><span class="p">(</span><span class="n">unicode</span><span class="p">,</span> <span class="n">PageElement</span><span class="p">):</span>

    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">SUFFIX</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new NavigableString.</span>

<span class="sd">        When unpickling a NavigableString, this method is called with</span>
<span class="sd">        the string in DEFAULT_OUTPUT_ENCODING. That encoding needs to be</span>
<span class="sd">        passed in to the superclass&#39;s __new__ or the superclass won&#39;t know</span>
<span class="sd">        how to handle non-ASCII characters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">unicode</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">)</span>
        <span class="n">u</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">u</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A copy of a NavigableString has the same contents and class</span>
<span class="sd">        as the original, but it is not connected to the parse tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getnewargs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="p">),)</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;text.string gives you text. This is for backwards</span>
<span class="sd">        compatibility for Navigable*String, but for CData* it lets you</span>
<span class="sd">        get the string without the CData wrapper.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; object has no attribute &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">attr</span><span class="p">))</span>

<div class="viewcode-block" id="NavigableString.output_ready"><a class="viewcode-back" href="../../generated/generated/bs4.NavigableString.output_ready.html#bs4.NavigableString.output_ready">[docs]</a>    <span class="k">def</span> <span class="nf">output_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PREFIX</span> <span class="o">+</span> <span class="n">output</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUFFIX</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;A NavigableString cannot be given a name.&quot;</span><span class="p">)</span></div>

<span class="k">class</span> <span class="nc">PreformattedString</span><span class="p">(</span><span class="n">NavigableString</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A NavigableString not subject to the normal formatting rules.</span>

<span class="sd">    The string will be passed into the formatter (to trigger side effects),</span>
<span class="sd">    but the return value will be ignored.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">output_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;CData strings are passed into the formatter.</span>
<span class="sd">        But the return value is ignored.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PREFIX</span> <span class="o">+</span> <span class="bp">self</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUFFIX</span>

<div class="viewcode-block" id="CData"><a class="viewcode-back" href="../../generated/generated/bs4.CData.html#bs4.CData">[docs]</a><span class="k">class</span> <span class="nc">CData</span><span class="p">(</span><span class="n">PreformattedString</span><span class="p">):</span>

    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">u&#39;&lt;![CDATA[&#39;</span>
    <span class="n">SUFFIX</span> <span class="o">=</span> <span class="s1">u&#39;]]&gt;&#39;</span></div>

<div class="viewcode-block" id="ProcessingInstruction"><a class="viewcode-back" href="../../generated/generated/bs4.ProcessingInstruction.html#bs4.ProcessingInstruction">[docs]</a><span class="k">class</span> <span class="nc">ProcessingInstruction</span><span class="p">(</span><span class="n">PreformattedString</span><span class="p">):</span>

    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">u&#39;&lt;?&#39;</span>
    <span class="n">SUFFIX</span> <span class="o">=</span> <span class="s1">u&#39;&gt;&#39;</span></div>

<div class="viewcode-block" id="Comment"><a class="viewcode-back" href="../../generated/generated/bs4.Comment.html#bs4.Comment">[docs]</a><span class="k">class</span> <span class="nc">Comment</span><span class="p">(</span><span class="n">PreformattedString</span><span class="p">):</span>

    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">u&#39;&lt;!--&#39;</span>
    <span class="n">SUFFIX</span> <span class="o">=</span> <span class="s1">u&#39;--&gt;&#39;</span></div>


<div class="viewcode-block" id="Declaration"><a class="viewcode-back" href="../../generated/generated/bs4.Declaration.html#bs4.Declaration">[docs]</a><span class="k">class</span> <span class="nc">Declaration</span><span class="p">(</span><span class="n">PreformattedString</span><span class="p">):</span>
    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">u&#39;&lt;?&#39;</span>
    <span class="n">SUFFIX</span> <span class="o">=</span> <span class="s1">u&#39;?&gt;&#39;</span></div>


<div class="viewcode-block" id="Doctype"><a class="viewcode-back" href="../../generated/generated/bs4.Doctype.html#bs4.Doctype">[docs]</a><span class="k">class</span> <span class="nc">Doctype</span><span class="p">(</span><span class="n">PreformattedString</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="Doctype.for_name_and_ids"><a class="viewcode-back" href="../../generated/generated/bs4.Doctype.for_name_and_ids.html#bs4.Doctype.for_name_and_ids">[docs]</a>    <span class="k">def</span> <span class="nf">for_name_and_ids</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pub_id</span><span class="p">,</span> <span class="n">system_id</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">pub_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="s1">&#39; PUBLIC &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">pub_id</span>
            <span class="k">if</span> <span class="n">system_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">+=</span> <span class="s1">&#39; &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">system_id</span>
        <span class="k">elif</span> <span class="n">system_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="s1">&#39; SYSTEM &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">system_id</span>

        <span class="k">return</span> <span class="n">Doctype</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

    <span class="n">PREFIX</span> <span class="o">=</span> <span class="s1">u&#39;&lt;!DOCTYPE &#39;</span>
    <span class="n">SUFFIX</span> <span class="o">=</span> <span class="s1">u&#39;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span></div>


<div class="viewcode-block" id="Tag"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.html#bs4.Tag">[docs]</a><span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">PageElement</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Represents a found HTML tag with its attributes and contents.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Tag.__init__"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.__init__.html#bs4.Tag.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">builder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">previous</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="s2">&quot;Basic constructor.&quot;</span>

        <span class="k">if</span> <span class="n">parser</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser_class</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># We don&#39;t actually store the parser object: that lets extracted</span>
            <span class="c1"># chunks be garbage-collected.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parser_class</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">__class__</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No value provided for new tag&#39;s name.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="k">if</span> <span class="n">attrs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">elif</span> <span class="n">attrs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">builder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">builder</span><span class="o">.</span><span class="n">cdata_list_attributes</span><span class="p">:</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">_replace_cdata_list_attribute_values</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">attrs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">previous</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Set up any substitutions, such as the charset in a META tag.</span>
        <span class="k">if</span> <span class="n">builder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">builder</span><span class="o">.</span><span class="n">set_up_substitutions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">can_be_empty_element</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">can_be_empty_element</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">can_be_empty_element</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="n">parserClass</span> <span class="o">=</span> <span class="n">_alias</span><span class="p">(</span><span class="s2">&quot;parser_class&quot;</span><span class="p">)</span>  <span class="c1"># BS3</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A copy of a Tag is a new Tag, unconnected to the parse tree.</span>
<span class="sd">        Its contents are a copy of the old Tag&#39;s contents.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">clone</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">nsprefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;can_be_empty_element&#39;</span><span class="p">,</span> <span class="s1">&#39;hidden&#39;</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">clone</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">:</span>
            <span class="n">clone</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">__copy__</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">clone</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_empty_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Is this tag an empty-element tag? (aka a self-closing tag)</span>

<span class="sd">        A tag that has contents is never an empty-element tag.</span>

<span class="sd">        A tag that has no contents may or may not be an empty-element</span>
<span class="sd">        tag. It depends on the builder used to create the tag. If the</span>
<span class="sd">        builder has a designated list of empty-element tags, then only</span>
<span class="sd">        a tag whose name shows up in that list is considered an</span>
<span class="sd">        empty-element tag.</span>

<span class="sd">        If the builder has no designated list of empty-element tags,</span>
<span class="sd">        then any tag with no contents is an empty-element tag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_be_empty_element</span>
    <span class="n">isSelfClosing</span> <span class="o">=</span> <span class="n">is_empty_element</span>  <span class="c1"># BS3</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convenience property to get the single string within this tag.</span>

<span class="sd">        :Return: If this tag has a single string child, return value</span>
<span class="sd">         is that string. If this tag has no children, or more than one</span>
<span class="sd">         child, return value is None. If this tag has one child tag,</span>
<span class="sd">         return value is the &#39;string&#39; attribute of the child tag,</span>
<span class="sd">         recursively.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">child</span>
        <span class="k">return</span> <span class="n">child</span><span class="o">.</span><span class="n">string</span>

    <span class="nd">@string</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">string</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_all_strings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">strip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="p">(</span><span class="n">NavigableString</span><span class="p">,</span> <span class="n">CData</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;Yield all strings of certain classes, possibly stripping them.</span>

<span class="sd">        By default, yields only NavigableString and CData objects. So</span>
<span class="sd">        no comments, processing instructions, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">descendant</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">descendants</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">types</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">descendant</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">))</span>
                <span class="ow">or</span>
                <span class="p">(</span><span class="n">types</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">descendant</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">types</span><span class="p">)):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">strip</span><span class="p">:</span>
                <span class="n">descendant</span> <span class="o">=</span> <span class="n">descendant</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">descendant</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="k">yield</span> <span class="n">descendant</span>

    <span class="n">strings</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_all_strings</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stripped_strings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_strings</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">string</span>

<div class="viewcode-block" id="Tag.get_text"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.get_text.html#bs4.Tag.get_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">u&quot;&quot;</span><span class="p">,</span> <span class="n">strip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">types</span><span class="o">=</span><span class="p">(</span><span class="n">NavigableString</span><span class="p">,</span> <span class="n">CData</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all child strings, concatenated using the given separator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_strings</span><span class="p">(</span>
                    <span class="n">strip</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">)])</span></div>
    <span class="n">getText</span> <span class="o">=</span> <span class="n">get_text</span>
    <span class="n">text</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_text</span><span class="p">)</span>

<div class="viewcode-block" id="Tag.decompose"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.decompose.html#bs4.Tag.decompose">[docs]</a>    <span class="k">def</span> <span class="nf">decompose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Recursively destroys the contents of this tree.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">while</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">next</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">next_element</span>
            <span class="n">i</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">i</span><span class="o">.</span><span class="n">contents</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">next</span></div>

<div class="viewcode-block" id="Tag.clear"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.clear.html#bs4.Tag.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decompose</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract all children. If decompose is True, decompose instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">decompose</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[:]:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
                    <span class="n">element</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">element</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[:]:</span>
                <span class="n">element</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span></div>

<div class="viewcode-block" id="Tag.index"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.index.html#bs4.Tag.index">[docs]</a>    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the index of a child by identity, not value. Avoids issues with</span>
<span class="sd">        tag.contents.index(element) getting the index of equal elements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">child</span> <span class="ow">is</span> <span class="n">element</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Tag.index: element not in tag&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tag.get"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.get.html#bs4.Tag.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the value of the &#39;key&#39; attribute for the tag, or</span>
<span class="sd">        the value given for &#39;default&#39; if it doesn&#39;t have that</span>
<span class="sd">        attribute.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tag.has_attr"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.has_attr.html#bs4.Tag.has_attr">[docs]</a>    <span class="k">def</span> <span class="nf">has_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span></div>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__hash__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;tag[key] returns the value of the &#39;key&#39; attribute for the tag,</span>
<span class="sd">        and throws an exception if it&#39;s not there.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Iterating over a tag iterates over its contents.&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;The length of a tag is the length of its list of contents.&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span>

    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;A tag is non-None even if it has no contents.&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setting tag[key] sets the value of the &#39;key&#39; attribute for the</span>
<span class="sd">        tag.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="s2">&quot;Deleting tag[key] deletes all &#39;key&#39; attributes for the tag.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calling a tag like a function is the same as calling its</span>
<span class="sd">        find_all() method. Eg. tag(&#39;a&#39;) returns a list of all the A tags</span>
<span class="sd">        found within this tag.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="c1">#print &quot;Getattr %s.%s&quot; % (self.__class__, tag)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;Tag&#39;</span><span class="p">):</span>
            <span class="c1"># BS3: soup.aTag -&gt; &quot;soup.find(&quot;a&quot;)</span>
            <span class="n">tag_name</span> <span class="o">=</span> <span class="n">tag</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">&#39;.</span><span class="si">%s</span><span class="s1">Tag is deprecated, use .find(&quot;</span><span class="si">%s</span><span class="s1">&quot;) instead.&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">tag_name</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">))</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tag_name</span><span class="p">)</span>
        <span class="c1"># We special case contents to avoid recursion.</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">tag</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">tag</span><span class="o">==</span><span class="s2">&quot;contents&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
            <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; object has no attribute &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">tag</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns true iff this tag has the same name, the same attributes,</span>
<span class="sd">        and the same contents (recursively) as the given tag.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">is</span> <span class="n">other</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="ow">or</span>
            <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;attrs&#39;</span><span class="p">)</span> <span class="ow">or</span>
            <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;contents&#39;</span><span class="p">)</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">attrs</span> <span class="ow">or</span>
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">my_child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">my_child</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns true iff this tag is not identical to the other tag,</span>
<span class="sd">        as defined in __eq__.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;unicode-escape&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Renders this tag as a string.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">PY3K</span><span class="p">:</span>
            <span class="c1"># &quot;The return value must be a string object&quot;, i.e. Unicode</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># &quot;The return value must be a string object&quot;, i.e. a bytestring.</span>
            <span class="c1"># By convention, the return value of __repr__ should also be</span>
            <span class="c1"># an ASCII string.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">PY3K</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">PY3K</span><span class="p">:</span>
        <span class="n">__str__</span> <span class="o">=</span> <span class="n">__repr__</span> <span class="o">=</span> <span class="n">__unicode__</span>

<div class="viewcode-block" id="Tag.encode"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.encode.html#bs4.Tag.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
               <span class="n">indent_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">,</span>
               <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;xmlcharrefreplace&quot;</span><span class="p">):</span>
        <span class="c1"># Turn the data structure into Unicode, then encode the</span>
        <span class="c1"># Unicode.</span>
        <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">indent_level</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_should_pretty_print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indent_level</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Should this tag be pretty-printed?&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">indent_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">HTMLAwareEntitySubstitution</span><span class="o">.</span><span class="n">preformatted_tags</span>
             <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_xml</span><span class="p">))</span>

<div class="viewcode-block" id="Tag.decode"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.decode.html#bs4.Tag.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">eventual_encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
               <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a Unicode representation of this tag and its contents.</span>

<span class="sd">        :param eventual_encoding: The tag is destined to be</span>
<span class="sd">           encoded into this encoding. This method is _not_</span>
<span class="sd">           responsible for performing that encoding. This information</span>
<span class="sd">           is passed in so that it can be substituted in if the</span>
<span class="sd">           document contains a &lt;META&gt; tag that mentions the document&#39;s</span>
<span class="sd">           encoding.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># First off, turn a string formatter into a function. This</span>
        <span class="c1"># will stop the lookup from happening over and over again.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">formatter</span><span class="p">):</span>
            <span class="n">formatter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_for_name</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">decoded</span> <span class="o">=</span> <span class="n">key</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="p">(</span>
                        <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">AttributeValueWithCharsetSubstitution</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="n">eventual_encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">eventual_encoding</span><span class="p">)</span>

                    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
                    <span class="n">decoded</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">unicode</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span>
                        <span class="o">+</span> <span class="n">EntitySubstitution</span><span class="o">.</span><span class="n">quoted_attribute_value</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
                <span class="n">attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">decoded</span><span class="p">)</span>
        <span class="n">close</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">closeTag</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty_element</span><span class="p">:</span>
            <span class="n">close</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">closeTag</span> <span class="o">=</span> <span class="s1">&#39;&lt;/</span><span class="si">%s%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">pretty_print</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_should_pretty_print</span><span class="p">(</span><span class="n">indent_level</span><span class="p">)</span>
        <span class="n">space</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">indent_space</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">indent_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">indent_space</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">indent_level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">pretty_print</span><span class="p">:</span>
            <span class="n">space</span> <span class="o">=</span> <span class="n">indent_space</span>
            <span class="n">indent_contents</span> <span class="o">=</span> <span class="n">indent_level</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indent_contents</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_contents</span><span class="p">(</span>
            <span class="n">indent_contents</span><span class="p">,</span> <span class="n">eventual_encoding</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:</span>
            <span class="c1"># This is the &#39;document root&#39; object.</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">contents</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">attribute_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
                <span class="n">attribute_string</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">indent_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Even if this particular tag is not pretty-printed,</span>
                <span class="c1"># we should indent up to the start of the tag.</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indent_space</span><span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&lt;</span><span class="si">%s%s%s%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">attribute_string</span><span class="p">,</span> <span class="n">close</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">pretty_print</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pretty_print</span> <span class="ow">and</span> <span class="n">contents</span> <span class="ow">and</span> <span class="n">contents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pretty_print</span> <span class="ow">and</span> <span class="n">closeTag</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">space</span><span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">closeTag</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">indent_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">closeTag</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">:</span>
                <span class="c1"># Even if this particular tag is not pretty-printed,</span>
                <span class="c1"># we&#39;re now done with the tag, and we should add a</span>
                <span class="c1"># newline if appropriate.</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>

<div class="viewcode-block" id="Tag.prettify"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.prettify.html#bs4.Tag.prettify">[docs]</a>    <span class="k">def</span> <span class="nf">prettify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="n">formatter</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tag.decode_contents"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.decode_contents.html#bs4.Tag.decode_contents">[docs]</a>    <span class="k">def</span> <span class="nf">decode_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">eventual_encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
                       <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Renders the contents of this tag as a Unicode string.</span>

<span class="sd">        :param indent_level: Each line of the rendering will be</span>
<span class="sd">           indented this many spaces.</span>

<span class="sd">        :param eventual_encoding: The tag is destined to be</span>
<span class="sd">           encoded into this encoding. This method is _not_</span>
<span class="sd">           responsible for performing that encoding. This information</span>
<span class="sd">           is passed in so that it can be substituted in if the</span>
<span class="sd">           document contains a &lt;META&gt; tag that mentions the document&#39;s</span>
<span class="sd">           encoding.</span>

<span class="sd">        :param formatter: The output formatter responsible for converting</span>
<span class="sd">           entities to Unicode characters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># First off, turn a string formatter into a function. This</span>
        <span class="c1"># will stop the lookup from happening over and over again.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">formatter</span><span class="p">):</span>
            <span class="n">formatter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_formatter_for_name</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>

        <span class="n">pretty_print</span> <span class="o">=</span> <span class="p">(</span><span class="n">indent_level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">):</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">output_ready</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">indent_level</span><span class="p">,</span> <span class="n">eventual_encoding</span><span class="p">,</span>
                                  <span class="n">formatter</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">text</span> <span class="ow">and</span> <span class="n">indent_level</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;pre&#39;</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">pretty_print</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;pre&#39;</span><span class="p">:</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">indent_level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pretty_print</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;pre&#39;</span><span class="p">:</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tag.encode_contents"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.encode_contents.html#bs4.Tag.encode_contents">[docs]</a>    <span class="k">def</span> <span class="nf">encode_contents</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">indent_level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
        <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Renders the contents of this tag as a bytestring.</span>

<span class="sd">        :param indent_level: Each line of the rendering will be</span>
<span class="sd">           indented this many spaces.</span>

<span class="sd">        :param eventual_encoding: The bytestring will be in this encoding.</span>

<span class="sd">        :param formatter: The output formatter responsible for converting</span>
<span class="sd">           entities to Unicode characters.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_contents</span><span class="p">(</span><span class="n">indent_level</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">contents</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span></div>

    <span class="c1"># Old method for BS3 compatibility</span>
<div class="viewcode-block" id="Tag.renderContents"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.renderContents.html#bs4.Tag.renderContents">[docs]</a>    <span class="k">def</span> <span class="nf">renderContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
                       <span class="n">prettyPrint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indentLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">prettyPrint</span><span class="p">:</span>
            <span class="n">indentLevel</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode_contents</span><span class="p">(</span>
            <span class="n">indent_level</span><span class="o">=</span><span class="n">indentLevel</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span></div>

    <span class="c1">#Soup methods</span>

<div class="viewcode-block" id="Tag.find"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.find.html#bs4.Tag.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return only the first child of this Tag matching the given</span>
<span class="sd">        criteria.&quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">recursive</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">l</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">r</span></div>
    <span class="n">findChild</span> <span class="o">=</span> <span class="n">find</span>

<div class="viewcode-block" id="Tag.find_all"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.find_all.html#bs4.Tag.find_all">[docs]</a>    <span class="k">def</span> <span class="nf">find_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts a list of Tag objects that match the given</span>
<span class="sd">        criteria.  You can specify the name of the Tag and any</span>
<span class="sd">        attributes you want the Tag to have.</span>

<span class="sd">        The value of a key-value pair in the &#39;attrs&#39; map can be a</span>
<span class="sd">        string, a list of strings, a regular expression object, or a</span>
<span class="sd">        callable that takes a string and returns whether or not the</span>
<span class="sd">        string matches for some custom definition of &#39;matches&#39;. The</span>
<span class="sd">        same is true of the tag name.&quot;&quot;&quot;</span>

        <span class="n">generator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">descendants</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="n">generator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_all</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">generator</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
    <span class="n">findAll</span> <span class="o">=</span> <span class="n">find_all</span>       <span class="c1"># BS3</span>
    <span class="n">findChildren</span> <span class="o">=</span> <span class="n">find_all</span>  <span class="c1"># BS2</span>

    <span class="c1">#Generator methods</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># return iter() to make the purpose of the method clear</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>  <span class="c1"># XXX This seems to be untested.</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">descendants</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">stopNode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_descendant</span><span class="p">()</span><span class="o">.</span><span class="n">next_element</span>
        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">current</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">stopNode</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">current</span>
            <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">next_element</span>

    <span class="c1"># CSS selector code</span>

    <span class="n">_selector_combinators</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;~&#39;</span><span class="p">]</span>
    <span class="n">_select_debug</span> <span class="o">=</span> <span class="kc">False</span>
<div class="viewcode-block" id="Tag.select_one"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.select_one.html#bs4.Tag.select_one">[docs]</a>    <span class="k">def</span> <span class="nf">select_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform a CSS selection operation on the current element.&quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Tag.select"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.select.html#bs4.Tag.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">,</span> <span class="n">_candidate_generator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform a CSS selection operation on the current element.&quot;&quot;&quot;</span>

        <span class="c1"># Handle grouping selectors if &#39;,&#39; exists, ie: p,a</span>
        <span class="k">if</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">selector</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">partial_selector</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
                <span class="n">partial_selector</span> <span class="o">=</span> <span class="n">partial_selector</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">partial_selector</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid group selection syntax: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">selector</span><span class="p">)</span>
                <span class="n">candidates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">partial_selector</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">candidate</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
                        <span class="n">context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">return</span> <span class="n">context</span>

        <span class="n">tokens</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">current_context</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selector_combinators</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Final combinator &quot;</span><span class="si">%s</span><span class="s1">&quot; is missing an argument.&#39;</span> <span class="o">%</span> <span class="n">tokens</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s1">&#39;Running CSS selector &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">selector</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tokens</span><span class="p">):</span>
            <span class="n">new_context</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">new_context_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([])</span>

            <span class="k">if</span> <span class="n">tokens</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selector_combinators</span><span class="p">:</span>
                <span class="c1"># This token was consumed by the previous combinator. Skip it.</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                    <span class="nb">print</span> <span class="s1">&#39;  Token was consumed by the previous combinator.&#39;</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">&#39; Considering token &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">token</span>
            <span class="n">recursive_candidate_generator</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">tag_name</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1"># Each operation corresponds to a checker function, a rule</span>
            <span class="c1"># for determining whether a candidate matches the</span>
            <span class="c1"># selector. Candidates are generated by the active</span>
            <span class="c1"># iterator.</span>
            <span class="n">checker</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribselect_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Attribute selector</span>
                <span class="n">tag_name</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
                <span class="n">checker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attribute_checker</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

            <span class="k">elif</span> <span class="s1">&#39;#&#39;</span> <span class="ow">in</span> <span class="n">token</span><span class="p">:</span>
                <span class="c1"># ID selector</span>
                <span class="n">tag_name</span><span class="p">,</span> <span class="n">tag_id</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">def</span> <span class="nf">id_matches</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">tag</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="n">tag_id</span>
                <span class="n">checker</span> <span class="o">=</span> <span class="n">id_matches</span>

            <span class="k">elif</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">token</span><span class="p">:</span>
                <span class="c1"># Class selector</span>
                <span class="n">tag_name</span><span class="p">,</span> <span class="n">klass</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">classes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span>
                <span class="k">def</span> <span class="nf">classes_match</span><span class="p">(</span><span class="n">candidate</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">classes</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="p">[]))</span>
                <span class="n">checker</span> <span class="o">=</span> <span class="n">classes_match</span>

            <span class="k">elif</span> <span class="s1">&#39;:&#39;</span> <span class="ow">in</span> <span class="n">token</span><span class="p">:</span>
                <span class="c1"># Pseudo-class</span>
                <span class="n">tag_name</span><span class="p">,</span> <span class="n">pseudo</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">tag_name</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;A pseudo-class must be prefixed with a tag name.&quot;</span><span class="p">)</span>
                <span class="n">pseudo_attributes</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;([a-zA-Z\d-]+)\(([a-zA-Z\d]+)\)&#39;</span><span class="p">,</span> <span class="n">pseudo</span><span class="p">)</span>
                <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">pseudo_attributes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">pseudo_type</span> <span class="o">=</span> <span class="n">pseudo</span>
                    <span class="n">pseudo_value</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pseudo_type</span><span class="p">,</span> <span class="n">pseudo_value</span> <span class="o">=</span> <span class="n">pseudo_attributes</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">pseudo_type</span> <span class="o">==</span> <span class="s1">&#39;nth-of-type&#39;</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">pseudo_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pseudo_value</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                            <span class="s1">&#39;Only numeric values are currently supported for the nth-of-type pseudo-class.&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">pseudo_value</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="s1">&#39;nth-of-type pseudo-class value must be at least 1.&#39;</span><span class="p">)</span>
                    <span class="k">class</span> <span class="nc">Counter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
                        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">destination</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">destination</span> <span class="o">=</span> <span class="n">destination</span>

                        <span class="k">def</span> <span class="nf">nth_child_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination</span><span class="p">:</span>
                                <span class="k">return</span> <span class="kc">True</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">destination</span><span class="p">:</span>
                                <span class="c1"># Stop the generator that&#39;s sending us</span>
                                <span class="c1"># these things.</span>
                                <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
                            <span class="k">return</span> <span class="kc">False</span>
                    <span class="n">checker</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">pseudo_value</span><span class="p">)</span><span class="o">.</span><span class="n">nth_child_of_type</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                        <span class="s1">&#39;Only the following pseudo-classes are implemented: nth-of-type.&#39;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                <span class="c1"># Star selector -- matches everything</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">:</span>
                <span class="c1"># Run the next token as a CSS selector against the</span>
                <span class="c1"># direct children of each tag in the current context.</span>
                <span class="n">recursive_candidate_generator</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">tag</span><span class="p">:</span> <span class="n">tag</span><span class="o">.</span><span class="n">children</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s1">&#39;~&#39;</span><span class="p">:</span>
                <span class="c1"># Run the next token as a CSS selector against the</span>
                <span class="c1"># siblings of each tag in the current context.</span>
                <span class="n">recursive_candidate_generator</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">tag</span><span class="p">:</span> <span class="n">tag</span><span class="o">.</span><span class="n">next_siblings</span>
            <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
                <span class="c1"># For each tag in the current context, run the next</span>
                <span class="c1"># token as a CSS selector against the tag&#39;s next</span>
                <span class="c1"># sibling that&#39;s a tag.</span>
                <span class="k">def</span> <span class="nf">next_tag_sibling</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">tag</span><span class="o">.</span><span class="n">find_next_sibling</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">recursive_candidate_generator</span> <span class="o">=</span> <span class="n">next_tag_sibling</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_name_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
                <span class="c1"># Just a tag name.</span>
                <span class="n">tag_name</span> <span class="o">=</span> <span class="n">token</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Unsupported or invalid CSS selector: &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">token</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">recursive_candidate_generator</span><span class="p">:</span>
                <span class="c1"># This happens when the selector looks like  &quot;&gt; foo&quot;.</span>
                <span class="c1">#</span>
                <span class="c1"># The generator calls select() recursively on every</span>
                <span class="c1"># member of the current context, passing in a different</span>
                <span class="c1"># candidate generator and a different selector.</span>
                <span class="c1">#</span>
                <span class="c1"># In the case of &quot;&gt; foo&quot;, the candidate generator is</span>
                <span class="c1"># one that yields a tag&#39;s direct children (&quot;&gt;&quot;), and</span>
                <span class="c1"># the selector is &quot;foo&quot;.</span>
                <span class="n">next_token</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">def</span> <span class="nf">recursive_select</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                        <span class="nb">print</span> <span class="s1">&#39;    Calling select(&quot;</span><span class="si">%s</span><span class="s1">&quot;) recursively on </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">next_token</span><span class="p">,</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">tag</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
                        <span class="nb">print</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">40</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">next_token</span><span class="p">,</span> <span class="n">recursive_candidate_generator</span><span class="p">):</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                            <span class="nb">print</span> <span class="s1">&#39;(Recursive select picked up candidate </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="n">i</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                        <span class="nb">print</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">40</span>
                <span class="n">_use_candidate_generator</span> <span class="o">=</span> <span class="n">recursive_select</span>
            <span class="k">elif</span> <span class="n">_candidate_generator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># By default, a tag&#39;s candidates are all of its</span>
                <span class="c1"># children. If tag_name is defined, only yield tags</span>
                <span class="c1"># with that name.</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">tag_name</span><span class="p">:</span>
                        <span class="n">check</span> <span class="o">=</span> <span class="s2">&quot;[any]&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">check</span> <span class="o">=</span> <span class="n">tag_name</span>
                    <span class="nb">print</span> <span class="s1">&#39;   Default candidate generator, tag name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">check</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                    <span class="c1"># This is redundant with later code, but it stops</span>
                    <span class="c1"># a bunch of bogus tags from cluttering up the</span>
                    <span class="c1"># debug log.</span>
                    <span class="k">def</span> <span class="nf">default_candidate_generator</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">tag</span><span class="o">.</span><span class="n">descendants</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
                                <span class="k">continue</span>
                            <span class="k">if</span> <span class="n">tag_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">child</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">tag_name</span><span class="p">:</span>
                                <span class="k">continue</span>
                            <span class="k">yield</span> <span class="n">child</span>
                    <span class="n">_use_candidate_generator</span> <span class="o">=</span> <span class="n">default_candidate_generator</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_use_candidate_generator</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">tag</span><span class="p">:</span> <span class="n">tag</span><span class="o">.</span><span class="n">descendants</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_use_candidate_generator</span> <span class="o">=</span> <span class="n">_candidate_generator</span>

            <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">current_context</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                    <span class="nb">print</span> <span class="s2">&quot;    Running candidate generator on </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">tag</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">tag</span><span class="o">.</span><span class="n">attrs</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">_use_candidate_generator</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">candidate</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">tag_name</span> <span class="ow">and</span> <span class="n">candidate</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">tag_name</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">checker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">result</span> <span class="o">=</span> <span class="n">checker</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                            <span class="c1"># The checker has decided we should no longer</span>
                            <span class="c1"># run the generator.</span>
                            <span class="k">break</span>
                    <span class="k">if</span> <span class="n">checker</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                            <span class="nb">print</span> <span class="s2">&quot;     SUCCESS </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="n">attrs</span><span class="p">))</span>
                        <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_context_ids</span><span class="p">:</span>
                            <span class="c1"># If a tag matches a selector more than once,</span>
                            <span class="c1"># don&#39;t include it in the context more than once.</span>
                            <span class="n">new_context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span>
                            <span class="n">new_context_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">candidate</span><span class="p">))</span>
                            <span class="k">if</span> <span class="n">limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_context</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                                <span class="k">break</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
                        <span class="nb">print</span> <span class="s2">&quot;     FAILURE </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">candidate</span><span class="o">.</span><span class="n">attrs</span><span class="p">))</span>


            <span class="n">current_context</span> <span class="o">=</span> <span class="n">new_context</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_debug</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;Final verdict:&quot;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">current_context</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">current_context</span></div>

    <span class="c1"># Old names for backwards compatibility</span>
<div class="viewcode-block" id="Tag.childGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.childGenerator.html#bs4.Tag.childGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">childGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span></div>

<div class="viewcode-block" id="Tag.recursiveChildGenerator"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.recursiveChildGenerator.html#bs4.Tag.recursiveChildGenerator">[docs]</a>    <span class="k">def</span> <span class="nf">recursiveChildGenerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">descendants</span></div>

<div class="viewcode-block" id="Tag.has_key"><a class="viewcode-back" href="../../generated/generated/bs4.Tag.has_key.html#bs4.Tag.has_key">[docs]</a>    <span class="k">def</span> <span class="nf">has_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This was kind of misleading because has_key() (attributes)</span>
<span class="sd">        was different from __in__ (contents). has_key() is gone in</span>
<span class="sd">        Python 3, anyway.&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;has_key is deprecated. Use has_attr(&quot;</span><span class="si">%s</span><span class="s1">&quot;) instead.&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">key</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_attr</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div></div>

<span class="c1"># Next, a couple classes to represent queries and their results.</span>
<div class="viewcode-block" id="SoupStrainer"><a class="viewcode-back" href="../../generated/generated/bs4.SoupStrainer.html#bs4.SoupStrainer">[docs]</a><span class="k">class</span> <span class="nc">SoupStrainer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Encapsulates a number of ways of matching a markup element (tag or</span>
<span class="sd">    text).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SoupStrainer.__init__"><a class="viewcode-back" href="../../generated/generated/bs4.SoupStrainer.__init__.html#bs4.SoupStrainer.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{},</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_search_value</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># Treat a non-dict value for attrs as a search for the &#39;class&#39;</span>
            <span class="c1"># attribute.</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrs</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s1">&#39;class_&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="c1"># Treat class_=&quot;foo&quot; as a search for the &#39;class&#39;</span>
            <span class="c1"># attribute, overriding any non-dict value for attrs.</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;class_&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;class_&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="n">normalized_attrs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">normalized_attrs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_search_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">normalized_attrs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_search_value</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_normalize_search_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># Leave it alone if it&#39;s a Unicode string, a callable, a</span>
        <span class="c1"># regular expression, a boolean, or None.</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">unicode</span><span class="p">)</span> <span class="ow">or</span> <span class="n">callable</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">)</span>
            <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>

        <span class="c1"># If it&#39;s a bytestring, convert it to Unicode, treating it as UTF-8.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>

        <span class="c1"># If it&#39;s listlike, convert it into a list of strings.</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
            <span class="n">new_value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">unicode</span><span class="p">)):</span>
                    <span class="c1"># This is almost certainly the user&#39;s mistake. In the</span>
                    <span class="c1"># interests of avoiding infinite loops, we&#39;ll let</span>
                    <span class="c1"># it through as-is rather than doing a recursive call.</span>
                    <span class="n">new_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normalize_search_value</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">new_value</span>

        <span class="c1"># Otherwise, convert it into a Unicode string.</span>
        <span class="c1"># The unicode(str()) thing is so this will do the same thing on Python 2</span>
        <span class="c1"># and Python 3.</span>
        <span class="k">return</span> <span class="n">unicode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">|</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>

<div class="viewcode-block" id="SoupStrainer.search_tag"><a class="viewcode-back" href="../../generated/generated/bs4.SoupStrainer.search_tag.html#bs4.SoupStrainer.search_tag">[docs]</a>    <span class="k">def</span> <span class="nf">search_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">markup_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">markup_attrs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup_name</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markup_name</span>
            <span class="n">markup_attrs</span> <span class="o">=</span> <span class="n">markup</span>
        <span class="n">call_function_with_tag_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">Callable</span><span class="p">)</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup_name</span><span class="p">,</span> <span class="n">Tag</span><span class="p">))</span>

        <span class="k">if</span> <span class="p">((</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">call_function_with_tag_data</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">markup</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matches</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="n">markup</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matches</span><span class="p">(</span><span class="n">markup_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))):</span>
            <span class="k">if</span> <span class="n">call_function_with_tag_data</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="n">markup_name</span><span class="p">,</span> <span class="n">markup_attrs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">markup_attr_map</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">match_against</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">markup_attr_map</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">markup_attrs</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">):</span>
                            <span class="n">markup_attr_map</span> <span class="o">=</span> <span class="n">markup_attrs</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">markup_attr_map</span> <span class="o">=</span> <span class="p">{}</span>
                            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">markup_attrs</span><span class="p">:</span>
                                <span class="n">markup_attr_map</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
                    <span class="n">attr_value</span> <span class="o">=</span> <span class="n">markup_attr_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matches</span><span class="p">(</span><span class="n">attr_value</span><span class="p">,</span> <span class="n">match_against</span><span class="p">):</span>
                        <span class="n">match</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">markup</span><span class="p">:</span>
                    <span class="n">found</span> <span class="o">=</span> <span class="n">markup</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">found</span> <span class="o">=</span> <span class="n">markup_name</span>
        <span class="k">if</span> <span class="n">found</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matches</span><span class="p">(</span><span class="n">found</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">found</span></div>
    <span class="n">searchTag</span> <span class="o">=</span> <span class="n">search_tag</span>

<div class="viewcode-block" id="SoupStrainer.search"><a class="viewcode-back" href="../../generated/generated/bs4.SoupStrainer.search.html#bs4.SoupStrainer.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">markup</span><span class="p">):</span>
        <span class="c1"># print &#39;looking for %s in %s&#39; % (self, markup)</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># If given a list of items, scan it for a text element that</span>
        <span class="c1"># matches.</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="p">(</span><span class="n">Tag</span><span class="p">,</span> <span class="n">basestring</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">)</span> \
                       <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">found</span> <span class="o">=</span> <span class="n">element</span>
                    <span class="k">break</span>
        <span class="c1"># If it&#39;s a Tag, make sure its name or attributes match.</span>
        <span class="c1"># Don&#39;t bother with Tags if we&#39;re searching for text.</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
                <span class="n">found</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_tag</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>
        <span class="c1"># If it&#39;s text, make sure the text matches.</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">NavigableString</span><span class="p">)</span> <span class="ow">or</span> \
                 <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matches</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">):</span>
                <span class="n">found</span> <span class="o">=</span> <span class="n">markup</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;I don&#39;t know how to match against a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">markup</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">found</span></div>

    <span class="k">def</span> <span class="nf">_matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">markup</span><span class="p">,</span> <span class="n">match_against</span><span class="p">):</span>
        <span class="c1"># print u&quot;Matching %s against %s&quot; % (markup, match_against)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="c1"># This should only happen when searching a multi-valued attribute</span>
            <span class="c1"># like &#39;class&#39;.</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">match_against</span><span class="p">,</span> <span class="n">unicode</span><span class="p">)</span>
                <span class="ow">and</span> <span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">match_against</span><span class="p">):</span>
                <span class="c1"># A bit of a special case. If they try to match &quot;foo</span>
                <span class="c1"># bar&quot; on a multivalue attribute&#39;s value, only accept</span>
                <span class="c1"># the literal value &quot;foo bar&quot;</span>
                <span class="c1">#</span>
                <span class="c1"># XXX This is going to be pretty slow because we keep</span>
                <span class="c1"># splitting match_against. But it shouldn&#39;t come up</span>
                <span class="c1"># too often.</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">whitespace_re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">match_against</span><span class="p">)</span> <span class="o">==</span> <span class="n">markup</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matches</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">match_against</span><span class="p">):</span>
                        <span class="k">return</span> <span class="kc">True</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">match_against</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># True matches any non-None value.</span>
            <span class="k">return</span> <span class="n">markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">match_against</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">Callable</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">match_against</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>

        <span class="c1"># Custom callables take the tag as an argument, but all</span>
        <span class="c1"># other ways of matching match the tag name as a string.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">name</span>

        <span class="c1"># Ensure that `markup` is either a Unicode string, or None.</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_search_value</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">markup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># None matches None, False, an empty string, an empty list, and so on.</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="n">match_against</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">match_against</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
            <span class="c1"># Exact string match</span>
            <span class="k">return</span> <span class="n">markup</span> <span class="o">==</span> <span class="n">match_against</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">match_against</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">):</span>
            <span class="c1"># Regexp match</span>
            <span class="k">return</span> <span class="n">match_against</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">match_against</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
            <span class="c1"># The markup must be an exact match against something</span>
            <span class="c1"># in the iterable.</span>
            <span class="k">return</span> <span class="n">markup</span> <span class="ow">in</span> <span class="n">match_against</span></div>


<div class="viewcode-block" id="ResultSet"><a class="viewcode-back" href="../../generated/generated/bs4.ResultSet.html#bs4.ResultSet">[docs]</a><span class="k">class</span> <span class="nc">ResultSet</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A ResultSet is just a list that keeps track of the SoupStrainer</span>
<span class="sd">    that created it.&quot;&quot;&quot;</span>
<div class="viewcode-block" id="ResultSet.__init__"><a class="viewcode-back" href="../../generated/generated/bs4.ResultSet.__init__.html#bs4.ResultSet.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="p">()):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ResultSet</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>