

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>bs4 &mdash; PROJECT_NAME 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PROJECT_NAME 1 documentation" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PROJECT_NAME
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../1_quick_start.html">1. Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_installation.html">2. Installing Beautiful Soup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_making_the_soup.html">3. Making the soup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_kind_of_objects.html">4. Kinds of objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_navigating_the_tree.html">5. Navigating the tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_searching_the_tree.html">6. Searching the tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_modifying_the_tree.html">7. Modifying the tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_output.html">8. Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../9_specifying_the_parser.html">9. Specifying the parser to use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_encodings.html">10. Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_parsing_parts_of_doc.html">11. Parsing only part of a document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12_troubleshooting.html">12. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/bs4.html">13. bs4</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PROJECT_NAME</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>bs4</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for bs4</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Beautiful Soup</span>
<span class="sd">Elixir and Tonic</span>
<span class="sd">&quot;The Screen-Scraper&#39;s Friend&quot;</span>
<span class="sd">http://www.crummy.com/software/BeautifulSoup/</span>

<span class="sd">Beautiful Soup uses a pluggable XML or HTML parser to parse a</span>
<span class="sd">(possibly invalid) document into a tree representation. Beautiful Soup</span>
<span class="sd">provides provides methods and Pythonic idioms that make it easy to</span>
<span class="sd">navigate, search, and modify the parse tree.</span>

<span class="sd">Beautiful Soup works with Python 2.6 and up. It works better if lxml</span>
<span class="sd">and/or html5lib is installed.</span>

<span class="sd">For more than you ever wanted to know about Beautiful Soup, see the</span>
<span class="sd">documentation:</span>
<span class="sd">http://www.crummy.com/software/BeautifulSoup/bs4/doc/</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Leonard Richardson (leonardr@segfault.org)&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;4.4.1&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright (c) 2004-2015 Leonard Richardson&quot;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;BeautifulSoup&#39;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">.builder</span> <span class="k">import</span> <span class="n">builder_registry</span><span class="p">,</span> <span class="n">ParserRejectedMarkup</span>
<span class="kn">from</span> <span class="nn">.dammit</span> <span class="k">import</span> <span class="n">UnicodeDammit</span>
<span class="kn">from</span> <span class="nn">.element</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">CData</span><span class="p">,</span>
    <span class="n">Comment</span><span class="p">,</span>
    <span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
    <span class="n">Declaration</span><span class="p">,</span>
    <span class="n">Doctype</span><span class="p">,</span>
    <span class="n">NavigableString</span><span class="p">,</span>
    <span class="n">PageElement</span><span class="p">,</span>
    <span class="n">ProcessingInstruction</span><span class="p">,</span>
    <span class="n">ResultSet</span><span class="p">,</span>
    <span class="n">SoupStrainer</span><span class="p">,</span>
    <span class="n">Tag</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># The very first thing we do is give a useful error if someone is</span>
<span class="c1"># running this code under Python 3 without converting it.</span>
<span class="s1">&#39;You are trying to run the Python 2 version of Beautiful Soup under Python 3. This will not work.&#39;</span><span class="o">&lt;&gt;</span><span class="s1">&#39;You need to convert the code, either by installing it (`python setup.py install`) or by running 2to3 (`2to3 -w bs4`).&#39;</span>

<div class="viewcode-block" id="BeautifulSoup"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.html#bs4.BeautifulSoup">[docs]</a><span class="k">class</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">Tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class defines the basic interface called by the tree builders.</span>

<span class="sd">    These methods will be called by the parser:</span>
<span class="sd">      reset()</span>
<span class="sd">      feed(markup)</span>

<span class="sd">    The tree builder may call these methods from its feed() implementation:</span>
<span class="sd">      handle_starttag(name, attrs) # See note about return value</span>
<span class="sd">      handle_endtag(name)</span>
<span class="sd">      handle_data(data) # Appends to the current data node</span>
<span class="sd">      endData(containerClass=NavigableString) # Ends the current data node</span>

<span class="sd">    No matter how complicated the underlying parser is, you should be</span>
<span class="sd">    able to build a tree using &#39;start tag&#39; events, &#39;end tag&#39; events,</span>
<span class="sd">    &#39;data&#39; events, and &quot;done with data&quot; events.</span>

<span class="sd">    If you encounter an empty-element tag (aka a self-closing tag,</span>
<span class="sd">    like HTML&#39;s &lt;br&gt; tag), call handle_starttag and then</span>
<span class="sd">    handle_endtag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ROOT_TAG_NAME</span> <span class="o">=</span> <span class="s1">u&#39;[document]&#39;</span>

    <span class="c1"># If the end-user gives no indication which tree builder they</span>
    <span class="c1"># want, look for one with these features.</span>
    <span class="n">DEFAULT_BUILDER_FEATURES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;fast&#39;</span><span class="p">]</span>

    <span class="n">ASCII_SPACES</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\x20\x0a\x09\x0c\x0d</span><span class="s1">&#39;</span>

    <span class="n">NO_PARSER_SPECIFIED_WARNING</span> <span class="o">=</span> <span class="s2">&quot;No parser was explicitly specified, so I&#39;m using the best available </span><span class="si">%(markup_type)s</span><span class="s2"> parser for this system (</span><span class="se">\&quot;</span><span class="si">%(parser)s</span><span class="se">\&quot;</span><span class="s2">). This usually isn&#39;t a problem, but if you run this code on another system, or in a different virtual environment, it may use a different parser and behave differently.</span><span class="se">\n\n</span><span class="s2">To get rid of this warning, change this:</span><span class="se">\n\n</span><span class="s2"> BeautifulSoup([your markup])</span><span class="se">\n\n</span><span class="s2">to this:</span><span class="se">\n\n</span><span class="s2"> BeautifulSoup([your markup], </span><span class="se">\&quot;</span><span class="si">%(parser)s</span><span class="se">\&quot;</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

<div class="viewcode-block" id="BeautifulSoup.__init__"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.__init__.html#bs4.BeautifulSoup.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">builder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">parse_only</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude_encodings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Soup object is initialized as the &#39;root tag&#39;, and the</span>
<span class="sd">        provided markup (which can be a string or a file-like object)</span>
<span class="sd">        is fed into the underlying parser.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;convertEntities&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the convertEntities argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. Entities are always converted &quot;</span>
                <span class="s2">&quot;to Unicode characters.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;markupMassage&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;markupMassage&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the markupMassage argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. The tree builder is responsible &quot;</span>
                <span class="s2">&quot;for any necessary markup massage.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;smartQuotesTo&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;smartQuotesTo&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the smartQuotesTo argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. Smart quotes are always converted &quot;</span>
                <span class="s2">&quot;to Unicode characters.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;selfClosingTags&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;selfClosingTags&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the selfClosingTags argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. The tree builder is responsible &quot;</span>
                <span class="s2">&quot;for understanding self-closing tags.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;isHTML&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;isHTML&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the isHTML argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. Suggest you use &quot;</span>
                <span class="s2">&quot;features=&#39;lxml&#39; for HTML and features=&#39;lxml-xml&#39; for &quot;</span>
                <span class="s2">&quot;XML.&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">deprecated_argument</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">old_name</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s1">&#39;The &quot;</span><span class="si">%s</span><span class="s1">&quot; argument to the BeautifulSoup constructor &#39;</span>
                    <span class="s1">&#39;has been renamed to &quot;</span><span class="si">%s</span><span class="s1">.&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">))</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">old_name</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">old_name</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">parse_only</span> <span class="o">=</span> <span class="n">parse_only</span> <span class="ow">or</span> <span class="n">deprecated_argument</span><span class="p">(</span>
            <span class="s2">&quot;parseOnlyThese&quot;</span><span class="p">,</span> <span class="s2">&quot;parse_only&quot;</span><span class="p">)</span>

        <span class="n">from_encoding</span> <span class="o">=</span> <span class="n">from_encoding</span> <span class="ow">or</span> <span class="n">deprecated_argument</span><span class="p">(</span>
            <span class="s2">&quot;fromEncoding&quot;</span><span class="p">,</span> <span class="s2">&quot;from_encoding&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;__init__() got an unexpected keyword argument &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">arg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">builder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">original_features</span> <span class="o">=</span> <span class="n">features</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
                <span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">features</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">features</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_BUILDER_FEATURES</span>
            <span class="n">builder_class</span> <span class="o">=</span> <span class="n">builder_registry</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="o">*</span><span class="n">features</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">builder_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FeatureNotFound</span><span class="p">(</span>
                    <span class="s2">&quot;Couldn&#39;t find a tree builder with the features you &quot;</span>
                    <span class="s2">&quot;requested: </span><span class="si">%s</span><span class="s2">. Do you need to install a parser library?&quot;</span>
                    <span class="o">%</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">features</span><span class="p">))</span>
            <span class="n">builder</span> <span class="o">=</span> <span class="n">builder_class</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">original_features</span> <span class="o">==</span> <span class="n">builder</span><span class="o">.</span><span class="n">NAME</span> <span class="ow">or</span>
                    <span class="n">original_features</span> <span class="ow">in</span> <span class="n">builder</span><span class="o">.</span><span class="n">ALTERNATE_NAMES</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">builder</span><span class="o">.</span><span class="n">is_xml</span><span class="p">:</span>
                    <span class="n">markup_type</span> <span class="o">=</span> <span class="s2">&quot;XML&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">markup_type</span> <span class="o">=</span> <span class="s2">&quot;HTML&quot;</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NO_PARSER_SPECIFIED_WARNING</span> <span class="o">%</span> <span class="nb">dict</span><span class="p">(</span>
                    <span class="n">parser</span><span class="o">=</span><span class="n">builder</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span>
                    <span class="n">markup_type</span><span class="o">=</span><span class="n">markup_type</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="n">builder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_xml</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">is_xml</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">soup</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span> <span class="o">=</span> <span class="n">parse_only</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">):</span>        <span class="c1"># It&#39;s a file-type object.</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">256</span><span class="p">:</span>
            <span class="c1"># Print out warnings for a couple beginner problems</span>
            <span class="c1"># involving passing non-markup to Beautiful Soup.</span>
            <span class="c1"># Beautiful Soup will still parse the input as markup,</span>
            <span class="c1"># just in case that&#39;s what the user really wants.</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">unicode</span><span class="p">)</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">supports_unicode_filenames</span><span class="p">):</span>
                <span class="n">possible_filename</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">possible_filename</span> <span class="o">=</span> <span class="n">markup</span>
            <span class="n">is_file</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">is_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">possible_filename</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># This is almost certainly a problem involving</span>
                <span class="c1"># characters not valid in filenames on this</span>
                <span class="c1"># system. Just let it go.</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="n">is_file</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
                    <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot; looks like a filename, not markup. You should probably open this file and pass the filehandle into Beautiful Soup.&#39;</span> <span class="o">%</span> <span class="n">markup</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">markup</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;http:&quot;</span> <span class="ow">or</span> <span class="n">markup</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;https:&quot;</span><span class="p">:</span>
                <span class="c1"># TODO: This is ugly but I couldn&#39;t get it to work in</span>
                <span class="c1"># Python 3 otherwise.</span>
                <span class="k">if</span> <span class="p">((</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">b</span><span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">unicode</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">u&#39; &#39;</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
                        <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot; looks like a URL. Beautiful Soup is not an HTTP client. You should probably use an HTTP client to get the document behind the URL, and feed that document to Beautiful Soup.&#39;</span> <span class="o">%</span> <span class="n">markup</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markup</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_encoding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">declared_html_encoding</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">contains_replacement_characters</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">prepare_markup</span><span class="p">(</span>
                 <span class="n">markup</span><span class="p">,</span> <span class="n">from_encoding</span><span class="p">,</span> <span class="n">exclude_encodings</span><span class="o">=</span><span class="n">exclude_encodings</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_feed</span><span class="p">()</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="n">ParserRejectedMarkup</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># Clear out the markup and remove the builder&#39;s circular</span>
        <span class="c1"># reference to this object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markup</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">soup</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">builder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Frequently a tree builder can&#39;t be pickled.</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;builder&#39;</span> <span class="ow">in</span> <span class="n">d</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">picklable</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;builder&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Convert the document to Unicode.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markup</span><span class="p">)</span>
        <span class="c1"># Close out any unfinished strings and close all the open tags.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endData</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_TAG_NAME</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">popTag</span><span class="p">()</span>

<div class="viewcode-block" id="BeautifulSoup.reset"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.reset.html#bs4.BeautifulSoup.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Tag</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_TAG_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushTag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.new_tag"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.new_tag.html#bs4.BeautifulSoup.new_tag">[docs]</a>    <span class="k">def</span> <span class="nf">new_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nsprefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new tag associated with this soup.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Tag</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.new_string"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.new_string.html#bs4.BeautifulSoup.new_string">[docs]</a>    <span class="k">def</span> <span class="nf">new_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">subclass</span><span class="o">=</span><span class="n">NavigableString</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new NavigableString associated with this soup.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">subclass</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.insert_before"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.insert_before.html#bs4.BeautifulSoup.insert_before">[docs]</a>    <span class="k">def</span> <span class="nf">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">successor</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;BeautifulSoup objects don&#39;t support insert_before().&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.insert_after"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.insert_after.html#bs4.BeautifulSoup.insert_after">[docs]</a>    <span class="k">def</span> <span class="nf">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">successor</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;BeautifulSoup objects don&#39;t support insert_after().&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.popTag"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.popTag.html#bs4.BeautifulSoup.popTag">[docs]</a>    <span class="k">def</span> <span class="nf">popTag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="c1">#print &quot;Pop&quot;, tag.name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span></div>

<div class="viewcode-block" id="BeautifulSoup.pushTag"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.pushTag.html#bs4.BeautifulSoup.pushTag">[docs]</a>    <span class="k">def</span> <span class="nf">pushTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="c1">#print &quot;Push&quot;, tag.name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">preserve_whitespace_tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.endData"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.endData.html#bs4.BeautifulSoup.endData">[docs]</a>    <span class="k">def</span> <span class="nf">endData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">containerClass</span><span class="o">=</span><span class="n">NavigableString</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span><span class="p">:</span>
            <span class="n">current_data</span> <span class="o">=</span> <span class="s1">u&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_data</span><span class="p">)</span>
            <span class="c1"># If whitespace is not preserved, and this string contains</span>
            <span class="c1"># nothing but ASCII spaces, replace it with a single space</span>
            <span class="c1"># or newline.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="p">:</span>
                <span class="n">strippable</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">current_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASCII_SPACES</span><span class="p">:</span>
                        <span class="n">strippable</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">strippable</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">current_data</span><span class="p">:</span>
                        <span class="n">current_data</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">current_data</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>

            <span class="c1"># Reset the data collector.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># Should we add this string to the tree at all?</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">and</span> \
                   <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">text</span> <span class="ow">or</span> \
                    <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">current_data</span><span class="p">)):</span>
                <span class="k">return</span>

            <span class="n">o</span> <span class="o">=</span> <span class="n">containerClass</span><span class="p">(</span><span class="n">current_data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object_was_parsed</span><span class="p">(</span><span class="n">o</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.object_was_parsed"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.object_was_parsed.html#bs4.BeautifulSoup.object_was_parsed">[docs]</a>    <span class="k">def</span> <span class="nf">object_was_parsed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">most_recent_element</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add an object to the parse tree.&quot;&quot;&quot;</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span>
        <span class="n">previous_element</span> <span class="o">=</span> <span class="n">most_recent_element</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span>

        <span class="n">next_element</span> <span class="o">=</span> <span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">next_sibling</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
            <span class="n">next_element</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">next_element</span>
            <span class="n">next_sibling</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">next_sibling</span>
            <span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">previous_sibling</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">previous_element</span><span class="p">:</span>
                <span class="n">previous_element</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">previous_element</span>

        <span class="n">o</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">previous_element</span><span class="p">,</span> <span class="n">next_element</span><span class="p">,</span> <span class="n">previous_sibling</span><span class="p">,</span> <span class="n">next_sibling</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span> <span class="o">=</span> <span class="n">o</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">:</span>
            <span class="c1"># This node is being inserted into an element that has</span>
            <span class="c1"># already been parsed. Deal with any dangling references.</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">previous_element</span> <span class="o">=</span> <span class="n">parent</span>
                <span class="n">previous_sibling</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">previous_element</span> <span class="o">=</span> <span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">next_element</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">next_sibling</span>
                <span class="n">next_sibling</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">next_element</span> <span class="o">=</span> <span class="n">next_sibling</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">o</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">previous_element</span>
            <span class="k">if</span> <span class="n">previous_element</span><span class="p">:</span>
                <span class="n">previous_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">o</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">next_element</span>
            <span class="k">if</span> <span class="n">next_element</span><span class="p">:</span>
                <span class="n">next_element</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">o</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">next_sibling</span>
            <span class="k">if</span> <span class="n">next_sibling</span><span class="p">:</span>
                <span class="n">next_sibling</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">o</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">previous_sibling</span>
            <span class="k">if</span> <span class="n">previous_sibling</span><span class="p">:</span>
                <span class="n">previous_sibling</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">o</span></div>

    <span class="k">def</span> <span class="nf">_popToTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nsprefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inclusivePop</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pops the tag stack up to and including the most recent</span>
<span class="sd">        instance of the given tag. If inclusivePop is false, pops the tag</span>
<span class="sd">        stack up to but *not* including the most recent instqance of</span>
<span class="sd">        the given tag.&quot;&quot;&quot;</span>
        <span class="c1">#print &quot;Popping to %s&quot; % name</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_TAG_NAME</span><span class="p">:</span>
            <span class="c1"># The BeautifulSoup object itself can never be popped.</span>
            <span class="k">return</span>

        <span class="n">most_recently_popped</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">stack_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stack_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">nsprefix</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">prefix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">inclusivePop</span><span class="p">:</span>
                    <span class="n">most_recently_popped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popTag</span><span class="p">()</span>
                <span class="k">break</span>
            <span class="n">most_recently_popped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popTag</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">most_recently_popped</span>

<div class="viewcode-block" id="BeautifulSoup.handle_starttag"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.handle_starttag.html#bs4.BeautifulSoup.handle_starttag">[docs]</a>    <span class="k">def</span> <span class="nf">handle_starttag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Push a start tag on to the stack.</span>

<span class="sd">        If this method returns None, the tag was rejected by the</span>
<span class="sd">        SoupStrainer. You should proceed as if the tag had not occured</span>
<span class="sd">        in the document. For instance, if this was a self-closing tag,</span>
<span class="sd">        don&#39;t call handle_endtag.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># print &quot;Start tag %s: %s&quot; % (name, attrs)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endData</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">text</span>
                 <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">search_tag</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">))):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">tag</span> <span class="o">=</span> <span class="n">Tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tag</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushTag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tag</span></div>

<div class="viewcode-block" id="BeautifulSoup.handle_endtag"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.handle_endtag.html#bs4.BeautifulSoup.handle_endtag">[docs]</a>    <span class="k">def</span> <span class="nf">handle_endtag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nsprefix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#print &quot;End tag: &quot; + name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endData</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_popToTag</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.handle_data"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.handle_data.html#bs4.BeautifulSoup.handle_data">[docs]</a>    <span class="k">def</span> <span class="nf">handle_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.decode"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulSoup.decode.html#bs4.BeautifulSoup.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
               <span class="n">eventual_encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
               <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string or Unicode representation of this document.</span>
<span class="sd">        To get Unicode, pass None for encoding.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_xml</span><span class="p">:</span>
            <span class="c1"># Print the XML declaration</span>
            <span class="n">encoding_part</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">eventual_encoding</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">encoding_part</span> <span class="o">=</span> <span class="s1">&#39; encoding=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">eventual_encoding</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">u&#39;&lt;?xml version=&quot;1.0&quot;</span><span class="si">%s</span><span class="s1">?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">encoding_part</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">u&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pretty_print</span><span class="p">:</span>
            <span class="n">indent_level</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indent_level</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">prefix</span> <span class="o">+</span> <span class="nb">super</span><span class="p">(</span><span class="n">BeautifulSoup</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
            <span class="n">indent_level</span><span class="p">,</span> <span class="n">eventual_encoding</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span></div></div>

<span class="c1"># Alias to make it easier to type import: &#39;from bs4 import _soup&#39;</span>
<span class="n">_s</span> <span class="o">=</span> <span class="n">BeautifulSoup</span>
<span class="n">_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span>

<div class="viewcode-block" id="BeautifulStoneSoup"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulStoneSoup.html#bs4.BeautifulStoneSoup">[docs]</a><span class="k">class</span> <span class="nc">BeautifulStoneSoup</span><span class="p">(</span><span class="n">BeautifulSoup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deprecated interface to an XML parser.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BeautifulStoneSoup.__init__"><a class="viewcode-back" href="../generated/generated/bs4.BeautifulStoneSoup.__init__.html#bs4.BeautifulStoneSoup.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;xml&#39;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s1">&#39;The BeautifulStoneSoup class is deprecated. Instead of using &#39;</span>
            <span class="s1">&#39;it, pass features=&quot;xml&quot; into the BeautifulSoup constructor.&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BeautifulStoneSoup</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="StopParsing"><a class="viewcode-back" href="../generated/bs4.StopParsing.html#bs4.StopParsing">[docs]</a><span class="k">class</span> <span class="nc">StopParsing</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="FeatureNotFound"><a class="viewcode-back" href="../generated/bs4.FeatureNotFound.html#bs4.FeatureNotFound">[docs]</a><span class="k">class</span> <span class="nc">FeatureNotFound</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="k">pass</span></div>


<span class="c1">#By default, act as an HTML pretty-printer.</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>